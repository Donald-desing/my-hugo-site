<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }}</title>
    <meta name="description" content="{{ .Description }}">
    <link rel="stylesheet" href="{{ "css/custom.css" | absURL }}">
    <!-- Firebase SDKs -->
    <script type="module">
        // Firebase configuration and initialization
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
            measurementId: "YOUR_MEASUREMENT_ID"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
    </script>
</head>
<body>
    <header>
        <h1>{{ .Site.Title }}</h1>
        <button id="dark-mode-toggle">Toggle Dark Mode</button>
        <form method="get" action="/search/" class="search-bar">
            <input type="text" name="q" placeholder="Search...">
            <button type="submit"><i class="fas fa-search"></i></button>
        </form>
        {{ partial "social-media.html" . }}
        <nav>
            <ul>
                {{ range .Site.Menus.main }}
                    <li class="dropdown">
                        <a href="{{ .URL }}">{{ .Name }}</a>
                        {{ if .HasChildren }}
                            <ul class="dropdown-content">
                                {{ range .Children }}
                                    <li><a href="{{ .URL }}">{{ .Name }}</a></li>
                                {{ end }}
                            </ul>
                        {{ end }}
                    </li>
                {{ end }}
            </ul>
        </nav>
    </header>
    <main>
        {{ partial "auth.html" . }}
        {{ block "main" . }}{{ end }}
    </main>
    <footer>
        <p>&copy; 2025 My Hugo Site. All Rights Reserved.</p>
        <div class="footer-links">
            <a href="/privacy-policy/">Privacy Policy</a>
            <a href="/terms-of-service/">Terms of Service</a>
        </div>
        {{ partial "newsletter.html" . }}
    </footer>

    <!-- Dark Mode Toggle Script -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const toggle = document.getElementById("dark-mode-toggle");
            toggle.addEventListener("click", function() {
                document.body.classList.toggle("dark-mode");
                localStorage.setItem('dark-mode', document.body.classList.contains('dark-mode'));
            });

            if (localStorage.getItem('dark-mode') === 'true') {
                document.body.classList.add('dark-mode');
            }
        });
    </script>
</body>
</html>
